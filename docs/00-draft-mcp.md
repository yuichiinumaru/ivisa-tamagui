liste todos os tipos de charts que se usa em BI, dos mais usados para os menos

Escolher o gr√°fico certo √© fundamental para que os dados contem a hist√≥ria correta. Em Business Intelligence (BI), a regra de ouro √©: a clareza supera a est√©tica.

Abaixo, organizei os gr√°ficos categorizados por frequ√™ncia de uso e utilidade, come√ßando pelos "cavalos de batalha" do dia a dia at√© os mais espec√≠ficos e complexos.

1. Os Indispens√°veis (Tier 1)
Estes constituem cerca de 80% da maioria dos dashboards. S√£o f√°ceis de ler e universalmente compreendidos.

KPI Cards (Cart√µes de Indicadores):

Uso: Mostrar um √∫nico n√∫mero cr√≠tico (Ex: Receita Total, NPS, Headcount).

Por que √© top 1: O executivo quer ver o "placar do jogo" imediatamente.

Gr√°fico de Colunas e Barras (Bar & Column Charts):

Uso: Comparar categorias. Use Colunas quando tiver poucos itens (ex: vendas por trimestre) e Barras (horizontais) quando os r√≥tulos forem longos ou houver muitas categorias (ex: ranking de vendedores).

Image of column chart vs bar chart
Shutterstock
Gr√°fico de Linha (Line Chart):

Uso: Visualizar tend√™ncias ao longo do tempo (s√©ries temporais).

Dica: Ideal para identificar picos, vales e sazonalidade.

Image of line chart data visualization
Getty Images
Tabelas e Matrizes:

Uso: Quando a precis√£o exata dos n√∫meros √© necess√°ria ou quando h√° muitas dimens√µes para mostrar de uma vez.

Gr√°fico de Rosca (Donut Chart) ou Pizza (Pie Chart):

Uso: Mostrar composi√ß√£o (parte de um todo).

Aviso: Use com modera√ß√£o. O gr√°fico de Rosca √© prefer√≠vel ao de Pizza pois permite colocar o total no centro. Nunca use se tiver mais de 4 ou 5 fatias.

Image of donut chart visualization
Getty Images
2. Relacionamento e Distribui√ß√£o (Tier 2)
Usados para an√°lises um pouco mais profundas, para entender "por que" algo aconteceu.

Gr√°fico de Dispers√£o (Scatter Plot):

Uso: Mostrar correla√ß√£o entre duas vari√°veis (Ex: Investimento em Marketing vs. Vendas). Ajuda a identificar outliers (pontos fora da curva).

Image of scatter plot chart
Shutterstock
Gr√°fico de √Årea (Area Chart):

Uso: Similar ao de linha, mas com o preenchimento abaixo. √ìtimo para mostrar volume acumulado ou a contribui√ß√£o de diferentes categorias para um total ao longo do tempo (√Årea Empilhada).

Mapa de Calor (Heatmap):

Uso: Visualizar densidade ou intensidade de valores em uma matriz. Muito usado para ver hor√°rios de pico ou correla√ß√£o cruzada.

Gr√°fico Combinado (Combo Chart):

Uso: Mistura Barras e Linhas. Cl√°ssico para comparar valores de escalas diferentes (Ex: Receita em Barras e Margem % em Linha).

3. Fluxo, Processo e Hierarquia (Tier 3)
Gr√°ficos espec√≠ficos para contextos de neg√≥cios particulares (Financeiro, CRM, Log√≠stica).

Gr√°fico de Funil (Funnel Chart):

Uso: Essencial para Vendas e Marketing. Mostra a perda de leads ao longo de est√°gios de um processo.

Gr√°fico de Cascata (Waterfall Chart):

Uso: O favorito do setor Financeiro. Mostra como um valor inicial chega a um valor final, detalhando as adi√ß√µes e dedu√ß√µes (Ex: Receita Bruta -> Impostos -> Custos -> Lucro L√≠quido).

Treemap (Mapa de √Årvore):

Uso: Mostrar hierarquias e propor√ß√µes atrav√©s de ret√¢ngulos aninhados. √ötil quando o gr√°fico de pizza n√£o comporta a quantidade de categorias.

Mapas (Maps/Geospatial):

Uso: Quando a localiza√ß√£o geogr√°fica √© determinante para a an√°lise (Vendas por Estado, Rotas de Log√≠stica).

Gauge (Veloc√≠metro) ou Bullet Chart:

Uso: Comparar um valor atual contra uma meta. O Bullet Chart √© a vers√£o moderna e mais limpa do veloc√≠metro.

4. Estat√≠sticos e Avan√ßados (Tier 4 - Menos Usados)
Estes s√£o poderosos, mas exigem que o p√∫blico tenha um n√≠vel maior de alfabetiza√ß√£o em dados para interpretar.

Box Plot (Diagrama de Caixa):

Uso: An√°lise estat√≠stica pura. Mostra a distribui√ß√£o, mediana, quartis e outliers de um conjunto de dados.

Image of box plot chart
Shutterstock
Gr√°fico de Radar (Spider/Radar Chart):

Uso: Comparar m√∫ltiplas vari√°veis de uma s√≥ categoria (Ex: Avalia√ß√£o de desempenho de um funcion√°rio em 5 compet√™ncias diferentes).

Diagrama de Sankey:

Uso: Visualizar fluxos complexos de "origem para destino" (Ex: Navega√ß√£o do usu√°rio no site, distribui√ß√£o de or√ßamento).

Gr√°fico de Bolhas (Bubble Chart):

Uso: Uma evolu√ß√£o do Scatter Plot, adicionando uma terceira dimens√£o (o tamanho da bolha).

Decomposi√ß√£o de √Årvore (Decomposition Tree):

Uso: Muito popular em ferramentas modernas (como Power BI) para an√°lise de causa raiz, permitindo "quebrar" um valor em v√°rias dimens√µes.

Qual escolher?
A escolha depende da pergunta que voc√™ quer responder:

Compara√ß√£o? Barras ou Colunas.

Tend√™ncia? Linhas.

Composi√ß√£o? Rosca ou Treemap.

Relacionamento? Dispers√£o.

Distribui√ß√£o? Histograma ou Box Plot.

Gostaria que eu sugerisse o gr√°fico ideal para um conjunto de dados espec√≠fico que voc√™ tenha em mente?

show! e graficos mais complexos tipo Diagrama de Sankey, pode listar uns na mesma linha?

Com certeza! Esses gr√°ficos entram na categoria de "Visualiza√ß√£o de Dados Avan√ßada". Eles s√£o frequentemente usados para Data Storytelling ou para an√°lises onde as rela√ß√µes entre os dados s√£o mais importantes do que os valores brutos isolados.

Aqui est√£o os gr√°ficos que seguem essa mesma linha de complexidade e prop√≥sito do Diagrama de Sankey:

1. Gr√°ficos de Fluxo e Relacionamento (Os "Primos" do Sankey)
Focados em mostrar como as coisas se conectam ou se movem de um lugar para outro.

Diagrama de Cordas (Chord Diagram):

O que √©: Imagine um c√≠rculo onde os pontos na borda est√£o conectados por arcos internos.

Uso: Mostra fluxos inter-relacionados entre um grupo de entidades.

Exemplo: Migra√ß√£o de pessoas entre pa√≠ses (fluxo de sa√≠da do Brasil para Portugal e vice-versa no mesmo gr√°fico) ou sobreposi√ß√£o de clientes entre produtos.

Gr√°fico de Rede (Network Graph / Force-Directed Graph):

O que √©: V√°rios "n√≥s" (bolinhas) conectados por "arestas" (linhas).

Uso: Visualizar conex√µes complexas e clusters.

Exemplo: Detec√ß√£o de fraudes (pessoas conectadas ao mesmo cart√£o de cr√©dito), redes sociais ou infraestrutura de TI.

Image of network graph visualization
Shutterstock
2. Gr√°ficos Hier√°rquicos Radiais
Maneiras avan√ßadas de mostrar "parte do todo" e hierarquia, fugindo das barras e pizzas.

Sunburst (Gr√°fico de Explos√£o Solar):

O que √©: Um gr√°fico de rosca com m√∫ltiplos an√©is saindo do centro para fora.

Uso: Mostrar hierarquia em camadas. √â como um Treemap, mas circular.

Exemplo: Categorias de produtos > Subcategorias > SKUs, permitindo ver qual subcategoria domina dentro da categoria principal.

Image of sunburst chart
Shutterstock
Rose Chart (Coxcomb / Polar Area):

O que √©: Famoso pelo uso por Florence Nightingale. Parece uma pizza, mas as fatias t√™m √¢ngulos iguais e variam no comprimento (raio) dependendo do valor.

Uso: Dados c√≠clicos ou sazonais.

Exemplo: Vendas por m√™s (onde o rel√≥gio de 12 meses √© o c√≠rculo) ou dire√ß√£o do vento.

3. Gr√°ficos Multivari√°veis (Alta Densidade)
Para quando voc√™ precisa cruzar muitas vari√°veis ao mesmo tempo.

Coordenadas Paralelas (Parallel Coordinates):

O que √©: V√°rios eixos verticais colocados lado a lado. Cada linha atravessa todos os eixos.

Uso: Comparar muitas vari√°veis diferentes de uma s√≥ vez para encontrar padr√µes ou exce√ß√µes.

Exemplo: Comparar 50 modelos de carros considerando: Pre√ßo, Pot√™ncia, Consumo, Peso e Ano. Voc√™ v√™ rapidamente se "carros potentes" tendem a ter "alto consumo".

Image of parallel coordinates chart
Shutterstock
Gr√°fico de Marimekko (Mekko Chart):

O que √©: Um gr√°fico de barras empilhadas, mas onde a largura da barra tamb√©m varia.

Uso: Visualizar duas dimens√µes de parti√ß√£o ao mesmo tempo.

Exemplo: Receita por Regi√£o (altura da barra) e Tamanho do Mercado daquela regi√£o (largura da barra). √â complexo, mas resume muita informa√ß√£o financeira.

Ridgeline Plot (Joyplot):

O que √©: V√°rios gr√°ficos de √°rea/densidade parcialmente sobrepostos verticalmente (parece uma cadeia de montanhas).

Uso: Comparar a distribui√ß√£o de uma vari√°vel num√©rica atrav√©s de v√°rias categorias.

Exemplo: Distribui√ß√£o de temperaturas di√°rias ao longo de 12 meses.

Um aviso sobre esses gr√°ficos:
Enquanto um Gr√°fico de Barras √© lido em 2 segundos, um Diagrama de Cordas ou Sankey pode exigir que o usu√°rio pare por 30 segundos para entender.

Dica de Ouro: S√≥ use esses gr√°ficos complexos se o seu p√∫blico for anal√≠tico ou se voc√™ puder estar presente para explicar a visualiza√ß√£o (apresenta√ß√£o assistida). Para dashboards "self-service" enviados por e-mail, eles podem gerar mais d√∫vidas do que respostas.

Quer saber como montar algum desses em uma ferramenta espec√≠fica (como Power BI, Tableau ou Python/Matplotlib)?

√© que eu estou fazendo um storybook de componentes importados / convertidos do shadcn para tamagui, e rola algum foco em BI por que √© para a prefeitura do rio de janeiro (no caso eu trabalho na vigilancia snitaria mas estamos disponibilizando como opensource pro pessoal todo). o tamagui √© cross platform, o shadcn √© bonito, por que n√£o? hahaha

ae a ideia √© ter o dark glassmorphism bonito do shadcn como dark theme e o tema branco / azul / azul claro safado da prefeitura do rio como padr√£o (pol√≠tica √© a morte da est√©tica √†s vezes, ne, mas fazer o que, pelo menos agora esses caras nao vao ter mais desculpa pra fazer site ruim e app zuado)



como eu j√° montei um caralhasso de atomo e molecula (mais de 100) e ja tem uns bons organismos, com stories, tudo bonitinho e tal, a ideia agora seria acrescentar graficos maneiros. a√≠ eu tava pensando em montar uma lista legal pra continua√ß√£o do roadmap de desenvolvimento, d√° uma olhada e ve se vc consegue pensar em varia√ß√µes ou ainda outros tipos de graficos:



 - Sankey Diagram

 - Bar Chart

 - Stacked Area Chart

 - Combo Chart‚Äã

 - Treemap

 - Data Table

 - KPI Cards‚Äã

 - Column Chart‚Äã

 - Line Chart‚Äã

 - Donut Chart‚Äã

 - Pie Chart‚Äã

 - Scatter Plot‚Äã

 - Area Chart‚Äã

 - Heatmap‚Äã

 - Funnel Chart‚Äã

 - Waterfall Chart‚Äã

 - Maps‚Äã

 - Gauge‚Äã

 - Bullet Chart‚Äã

 - Box Plot‚Äã

 - Radar Chart‚Äã

 - Spider Chart‚Äã

 - Bubble Chart‚Äã

 - Decomposition Tree‚Äã

 - Chord Diagram‚Äã

 - Network Graph‚Äã

 - Force-Directed Graph‚Äã

 - Sunburst Chart‚Äã

 - Rose Chart‚Äã

 - Coxcomb Chart‚Äã

 - Polar Area Chart‚Äã

 - Parallel Coordinates‚Äã

 - Marimekko Chart‚Äã

 - Ridgeline Plot‚Äã

 - Joyplot‚Äã

Cara, sensacional a iniciativa! Unir a robustez do Tamagui (que √© um monstro para cross-platform e performance) com a eleg√¢ncia do shadcn/ui, e ainda disponibilizar isso como opensource para a Prefeitura do Rio? Isso √© servi√ßo p√∫blico de verdade. üôå

E concordo 100%: pol√≠tica visual governamental geralmente parou em 2005. Trazer o Glassmorphism (que no dark mode fica lindo com os tokens do shadcn) e harmonizar com o "Azul Prefeitura" no light mode √© a chave para a galera realmente gostar de usar o sistema.

Sobre o seu Roadmap, a lista est√° complet√≠ssima, mas eu fiz uma "curadoria t√©cnica" para voc√™ n√£o gastar tempo recriando a roda (tem coisa repetida com nome diferente) e adicionei uns que s√£o matadores para gest√£o p√∫blica e sa√∫de (Vigil√¢ncia Sanit√°ria).

Aqui vai minha an√°lise para o seu Storybook:

1. Otimiza√ß√£o (Remove duplicatas do Roadmap)
Alguns itens da sua lista s√£o essencialmente o mesmo gr√°fico com nomes diferentes. No c√≥digo, voc√™ pode criar um componente s√≥ e variar via props.

Radar Chart = Spider Chart (Mesma coisa).

Rose Chart = Coxcomb Chart = Polar Area Chart (Funde esses tr√™s num componente s√≥. Chama de PolarArea e deixa configurar se as fatias t√™m √¢ngulos iguais ou variados).

Ridgeline Plot = Joyplot (√â o mesmo. Ridgeline √© o nome moderno porque "Joyplot" tem uma origem hist√≥rica controversa na estat√≠stica, embora venha da capa do √°lbum do Joy Division).

2. Adi√ß√µes Estrat√©gicas (Foco em Governo/Sa√∫de)
Para a IVISA e Prefeitura, esses aqui v√£o brilhar muito nos dashboards:

A. Demografia e Popula√ß√£o
Population Pyramid (Pir√¢mide Et√°ria):

Por que: Essencial para relat√≥rios de sa√∫de p√∫blica e censo. √â basicamente um Bar Chart bi-direcional.

Uso: Distribui√ß√£o de homens/mulheres por idade em uma regi√£o administrativa.

B. Tempo e Gest√£o
Gantt Chart:

Por que: Gest√£o de projetos p√∫blicos, cronograma de obras ou fases de uma fiscaliza√ß√£o sanit√°ria.

Visual: Barras horizontais flutuantes no tempo.

Calendar Heatmap (Estilo GitHub):

Por que: Visualizar intensidade de atividade di√°ria ao longo do ano.

Uso: "N√∫mero de infra√ß√µes emitidas por dia" ou "Fiscaliza√ß√µes realizadas".

Timeline View:

Por que: Uma linha vertical ou horizontal com marcos (dots).

Uso: Hist√≥rico de licenciamento de um estabelecimento (Abertura -> Fiscaliza√ß√£o -> Multa -> Adequa√ß√£o -> Alvar√°).

C. Micro-Charts (Para inserir dentro de Tabelas e Cards)
Como voc√™ est√° usando Shadcn e Tamagui, a est√©tica clean pede gr√°ficos minimalistas.

Sparklines:

O que √©: Gr√°ficos de linha min√∫sculos, sem eixos, usados dentro de KPI Cards ou c√©lulas de Data Tables.

Uso: Mostrar a tend√™ncia de queda ou subida logo ao lado do n√∫mero total.

Radial Bar (Apple Watch Rings):

O que √©: Varia√ß√£o moderna do Gauge.

Uso: Meta de arrecada√ß√£o ou progresso de vacina√ß√£o. Fica muito mais bonito que o veloc√≠metro cl√°ssico em interfaces modernas.

D. Geoespacial (O "Rio" Factor)
Como √© para o Rio, mapas s√£o vitais.

Choropleth Map (Mapa Coropl√©tico):

O que √©: Mapa dividido por regi√µes (Bairros, RAs, APs) coloridos pela intensidade de uma m√©trica.

Uso: "Casos de Dengue por Bairro".

Dot Density Map:

O que √©: Pontos no mapa.

Uso: Localiza√ß√£o exata dos estabelecimentos fiscalizados.

3. Sugest√£o de Organiza√ß√£o no Storybook
Eu dividiria o menu lateral do seu Storybook assim para facilitar a vida dos devs da prefeitura:

Primitives (√Åtomos): Eixos, Legendas, Tooltips (cruciais para acessibilidade), Grid lines.

KPIs & Micro: Cards com Sparklines, Radial Bars, Progress Rings.

Categorical: Bar, Column, Lollipop Chart (varia√ß√£o mais leve do Bar chart).

Time Series: Line, Area, Stacked Area, Calendar Heatmap.

Part-to-Whole: Donut (prefira ao Pie), Treemap, Sunburst.

Distribution: Histogram, Box Plot, Violin Plot (varia√ß√£o mais bonita do Box Plot).

Relational: Scatter, Bubble, Network/Graph.

Flow: Sankey, Chord, Waterfall.

Geospatial: Maps (integra√ß√£o com GeoJSON dos bairros do Rio).

Dica T√©cnica (Tamagui + Performance)
J√° que voc√™ quer cross-platform (React Native + Web) e glassmorphism:

Considere usar o React Native Skia (da Shopify) como "engine" para desenhar esses gr√°ficos dentro dos componentes Tamagui.

Por que? O Skia renderiza gr√°ficos absurdamente lisos (60fps), permite shaders (perfeito para o efeito de vidro/blur/glow do glassmorphism) e roda nativo no mobile e via Canvas na Web.

Se for usar bibliotecas prontas de base, a Victory Native XL est√° muito boa com Skia agora.

Cara, se conseguir empacotar isso num pacote NPM da prefeitura (@rio-prefeitura/ui-charts), vai ser um legado incr√≠vel. Se quiser ajuda para pensar nas props de algum gr√°fico espec√≠fico (tipo o Sankey, que √© chato de fazer responsivo), √© s√≥ falar!

Excelente! Obrigado! Deixa eu mostrar aqui como ta a tasklist correndo - os agentes de IA que fiz est√£o trabalhando em paralelo (gra√ßas ao atomic design system <3) e j√° est√£o mandando bala

(boa parte da lista de tarefas, que ja ficou completa, eu movi pra outro documento pra desafogar e nao ocupar janela de contexto desnecessariamente)



Consegue pensar em mais algo que seria realmente √∫til pra prefeitura? eu trabalho na vigilancia sanitaria, que por sua vez est√° na sa√∫de, mas a gest√£o p√∫blica como um todo talvez, tem algo que ainda nao pensamos de repente na minha √°rea ou em outras?





# 02 ‚Äì Tasks for the Ivisa Tamagui Design System



## Legend

- Status: `[ ]` pending, `[~]` in progress, `[x]` completed

- Tags: `TDD`, `FDD`, `SDD`, `DDD`, `DOC`, `UX`



---



## üöÄ Priority 1: Component Refactor & BI Expansion (Jules Swarm)



### ‚öõÔ∏è ATOMS

**Goal:** Refactor for PT-BR, A11y, and Robustness using the "Atom Algorithm".



*(All Priority 1 Atoms have been refactored and moved to 'Completed Tasks'.)*



### üß™ MOLECULES

**Goal:** Upgrade for State Orchestration and Layout Integrity using the "Molecule Algorithm".



*(All Priority 1 Molecules have been refactored and moved to 'Completed Tasks'.)*



### üß¨ ORGANISMS

**Goal:** Upgrade for Data Lifecycle and Container Agnosticism using the "Organism Algorithm".



*(All Priority 1 Organisms have been implemented and moved to 'Completed Tasks'.)*



---



## üöÄ Priority 2: Intelligent Organisms (Phase 5)

**Goal:** Transition from "Parts" to "Solutions" using complex logic and composition.



- [x] Implement `SchemaForm` (Dynamic Form Engine)

- [ ] Implement `Scheduler` (Big Calendar)

- [ ] Implement `ChatWidget` (AI Interface)

- [ ] Implement `CookieBanner` (Compliance)

- [ ] Implement `AnimatedSegmentedControl` (Smart Tabs)

- [ ] Implement `WizardForm` (Multi-Step Logic)

- [ ] Implement `FilterBar` (Advanced Search)

- [ ] Implement `NotificationFeed` (History)

- [ ] Implement `MediaGrid` (Asset Manager)

- [ ] Implement `AuthScreen` (Unified Login)



---



## üöÄ Phase 5a: BI & Data Visualization Expansion

**Goal:** Implement a comprehensive suite of data visualization components using Victory (or custom SVG where Victory is insufficient, strictly avoiding new dependencies).



- [ ] **Review & Enhance Existing BI Components**

  - [ ] Review `DataTable` against requirements

  - [ ] Review `KPIGrid` (KPI Cards) against requirements

  - [ ] Review `GaugeChart` against requirements

  - [ ] Review `TimeSeriesChart` (Line Chart) and consider a generic `LineChart` variant

- [ ] **Standard Charts (Wave 1)**

  - [ ] Refactor `Charts` to `BarChart` (and `ColumnChart` alias)

  - [ ] Implement `LineChart` (Generic Categorical)

  - [ ] Implement `PieChart` (Pie & Donut variants)

  - [ ] Implement `AreaChart` (Standard & Stacked)

  - [ ] Implement `ScatterChart` (Scatter & Bubble)

  - [ ] Implement `ComboChart` (Mixed Bar/Line/Scatter)

- [ ] **Advanced Charts (Wave 2)**

  - [ ] Implement `BoxPlotChart`

  - [ ] Implement `RadarChart` (Spider/Radar)

  - [ ] Implement `PolarChart` (Rose/Coxcomb/Polar Area)

  - [ ] Implement `WaterfallChart`

  - [ ] Implement `FunnelChart`

  - [ ] Implement `BulletChart`

- [ ] **Complex & Custom Charts (Wave 3)**

  - [ ] Implement `HeatmapChart`

  - [ ] Implement `TreemapChart`

  - [ ] Implement `SankeyDiagram`

  - [ ] Implement `ChordDiagram`

  - [ ] Implement `NetworkGraph` (Force-Directed)

  - [ ] Implement `SunburstChart`

  - [ ] Implement `ParallelCoordinates`

  - [ ] Implement `MarimekkoChart`

  - [ ] Implement `RidgelinePlot` (Joyplot)

  - [ ] Implement `DecompositionTree`

  - [ ] Implement `Maps` (Geo)



---



## üöÄ Current Focus: Phase 4 ‚Äì Web-Specific UX & Full Documentation



25 - [x] **Populate Storybook as Source of Truth** (DOC)

  - [x] 25a ‚Äì **Primary Docs**: Ensure every component has a Storybook entry with full description and props documentation.

  - [x] 25b ‚Äì **Visual States**: Create stories for all variants and states (hover, press, error).

  - [x] 25c ‚Äì **Usage Notes**: Add usage guidelines directly in Storybook MDX or description fields.



26 - [x] **Documentation Passes** (DOC)

  - [x] 26a ‚Äì Ensure `docs/01-plan.md`, `docs/02-tasks.md`, and `docs/03-architecture.md` are in sync with current implementation.

  - [x] 26b ‚Äì Record major milestones and decisions in `docs/04-changelog.md`.

  - [x] 26c ‚Äì **Document Multi-Root Workspace**: Add instructions for setting up VSCode Multi-Root Workspace for referencing `sushi` and `tamagui-kitchen-sink`.



---



## ‚è≠Ô∏è Upcoming: Phase 5b ‚Äì Integration & Handoff



27 - [ ] **Integrate Design System into Flows** (FDD, UX)

  - [ ] 27a ‚Äì Replace ad-hoc UI in chat, settings, and key dashboards with `packages/ui` components.

  - [ ] 27b ‚Äì Add end-to-end tests for at least one representative flow per area.



28 - [ ] **Finalize Accessibility and Cross-Platform Checks** (TDD, UX)

  - [ ] 28a ‚Äì Run accessibility inspections on web.

  - [ ] 28b ‚Äì Validate main components on iOS/Android using Expo.



29 - [ ] **Handoff Package and Docs** (DOC)

  - [ ] 29a ‚Äì Write "How to add a new component" guide for `packages/ui`.

  - [ ] 29b ‚Äì Summarize headless integrations and upgrade strategy.

  - [ ] 29c ‚Äì Capture future ideas in `docs/05-ideas.md` if needed.



---



## üõ†Ô∏è Backlog: Phase 6 ‚Äì Gap Fill, QA & Tech Debt



37 - [ ] **QA & Cleanup**

  - [ ] 37a ‚Äì **Resolve Linting Errors**: Fix remaining lint warnings in `packages/ui` (if any).

  - [ ] 37b ‚Äì **Standardize Structure**: Ensure all tests are co-located or strictly organized.

  - [ ] 37c ‚Äì **Atoms Coverage**: Add tests for `Stack`, `Dot`, `NavLink`.

  - [ ] 38a ‚Äì **Fix Disabled Tests**: Resolve issues in `Command`, `Menubar`, `DropdownMenu`, and `Autocomplete` tests.

  - [ ] 38b ‚Äì **Molecules Coverage**: Add tests for `HoverCard`, `NavigationMenu`, `OTPInput`, `Resizable`.

  - [ ] 38c ‚Äì **Interaction Tests**: Improve reliability of tests involving Radix/Headless interactions in JSDOM.



---



## ‚úÖ Completed Tasks



- [x] Refactor `Alert`

- [x] Refactor `AspectRatio`

- [x] Refactor `Avatar`

- [x] Refactor `Badge`

- [x] Refactor `Button`

- [x] Refactor `Checkbox`

- [x] Refactor `Input`

- [x] Refactor `Kbd`

- [x] Refactor `Label`

- [x] Refactor `Progress`

- [x] Refactor `ScrollArea`

- [x] Refactor `Separator`

- [x] Refactor `Skeleton`

- [x] Refactor `Slider`

- [x] Refactor `Spinner`

- [x] Refactor `Stack`

- [x] Refactor `Switch`

- [x] Refactor `Textarea`

- [x] Refactor `Toggle`

- [x] Refactor `Typography`

- [x] Implement `NavLink`

- [x] Implement `Logo`

- [x] Implement `Dot`

- [x] Refactor `Accordion`

- [x] Refactor `AlertDialog`

- [x] Refactor `AvatarGroup`

- [x] Refactor `BadgeCounter`

- [x] Refactor `Breadcrumb`

- [x] Refactor `ButtonGroup`

- [x] Refactor `Calendar`

- [x] Refactor `Card`

- [x] Refactor `Collapsible`

- [x] Refactor `ComponentErrorBoundary`

- [x] Refactor `ContextMenu`

- [x] Refactor `Dialog`

- [x] Refactor `Drawer`

- [x] Refactor `Empty`

- [x] Refactor `Field`

- [x] Refactor `HoverCard`

- [x] Refactor `InputGroup`

- [x] Refactor `Item`

- [x] Refactor `Menubar`

- [x] Refactor `MonthsPicker`

- [x] Refactor `NativeSelect`

- [x] Refactor `NavigationMenu`

- [x] Refactor `OTPInput`

- [x] Refactor `Pagination`

- [x] Refactor `Popover`

- [x] Refactor `RadioGroup`

- [x] Refactor `Resizable`

- [x] Refactor `Select`

- [x] Refactor `Sheet`

- [x] Refactor `Sonner`

- [x] Refactor `StarRating`

- [x] Refactor `Stepper`

- [x] Refactor `Table`

- [x] Refactor `Tabs`

- [x] Refactor `Toast`

- [x] Refactor `ToggleGroup`

- [x] Refactor `Tooltip`

- [x] Implement `MetricCard`

- [x] Implement `NavGroup`

- [x] Implement `ChartContainer`

- [x] Implement `RadialChartContent`

- [x] Implement `HorizontalBarGroup`

- [x] Refactor `Autocomplete`

- [x] Refactor `Carousel`

- [x] Refactor `Charts`

- [x] Refactor `Command`

- [x] Refactor `DashboardShell` (formerly DashboardLayout)

- [x] Refactor `DataTable`

- [x] Refactor `FileUpload`

- [x] Refactor `Form`

- [x] Refactor `RichText`

- [x] Refactor `Sidebar`

- [x] Refactor `Timeline`

- [x] Implement `KPIGrid`

- [x] Implement `TimeSeriesChart`

- [x] Implement `GaugeChart`

- [x] Implement `RankingChart`

- [x] **Restore Visual Check**: Re-implement `scripts/visual-check.js`.

- [x] **Fix Current Unit Test Failures (P0)**: Fixed snapshot/style mismatches in `Button`, `Typography`, etc.

- [x] **Implement Security Scanning (P1)**: Integrated security scanner.

- [x] **Resolve All Linting Errors (P1)**: Fixed 70+ ESLint errors.

- [x] **Restore Visual Testing Capabilities (P2)**: Restored `scripts/visual-check.js`.

- [x] **Component Acceleration Phase**: Harvested `pogiii/sushi` and `tamagui-kitchen-sink`.

- [x] **Task 36a**: Implement `button-group`

- [x] **Task 36b**: Implement `empty` state component

- [x] **Task 36c**: Implement `field` component

- [x] **Task 36d**: Implement `input-group`

- [x] **Task 36e**: Implement `item` component

- [x] **Task 36f**: Implement `kbd` (Keyboard shortcut display)

- [x] **Task 36g**: Implement `label`

- [x] **Task 36h**: Implement `native-select`

- [x] **Task 36i**: Implement `sonner` (Toast alternative)

- [x] **Task 36j**: Implement `table` (Basic table)

- [x] **Command Palette**: Implemented `Command`.

- [x] **Date Picker**: Implemented `Calendar` + `DatePicker`.

- [x] **DropdownMenu**: Implemented `DropdownMenu`.

- [x] **HoverCard**: Implemented using `Popover`.

- [x] **Carousel**: Implemented using `embla-carousel`.

- [x] **AspectRatio**: Implemented.

- [x] **Collapsible**: Implemented.

- [x] **Spinner**: Implemented.

- [x] **Phase 0 (Research)**: Ecosystem research, direction decided.

- [x] **Phase 1 (Foundation)**: Theme, Config, Forms, Providers, Testing Setup.

- [x] **Phase 2 (High Impact)**: DataTable, Calendar, Command.

- [x] **Phase 3 (Expansion)**: Carousel, OTPInput, Pagination, Breadcrumb, Sidebar, Charts.

- [x] **Phase 4 (Web UX - Partial)**: NavigationMenu, ToggleGroup, Alert, Badge, Switch, Sheet, Toast, Avatar, Tabs, Accordion, Slider, RadioGroup, Skeleton, Progress, Separator, Toggle, ScrollArea, Resizable, Drawer, Tooltip, ContextMenu.

- [x] **Brand Integration**: IVISA branding applied.

- [x] **Submodule Strategy**: Documentation created.

Cara, que estrutura impec√°vel! S√©rio, ver Atomic Design sendo aplicado com rigor em um projeto governamental, com agentes de IA orquestrando tasks em Parallel Processing... isso √© m√∫sica para os meus ouvidos. A prefeitura do Rio vai ter um salto de qualidade absurdo com isso.

Analisei sua Tasklist (que j√° est√° complet√≠ssima) com o chap√©u de Gest√£o P√∫blica e Vigil√¢ncia Sanit√°ria (Field Operations). O que costuma "pegar" na sa√∫de p√∫blica n√£o √© s√≥ a an√°lise (BI), mas a opera√ß√£o na ponta (o fiscal na rua) e a seguran√ßa jur√≠dica (o documento gerado).

Aqui v√£o sugest√µes de componentes que talvez n√£o sejam √≥bvios em UI Kits comerciais, mas que salvam vidas (literalmente e figurativamente) no setor p√∫blico:

1. Opera√ß√£o de Campo (O Fiscal na Rua)
A Vigil√¢ncia Sanit√°ria acontece no local. O app precisa funcionar como uma prancheta digital robusta.

SignaturePad (Assinatura Digital Manuscrita):

O que √©: Um canvas para capturar a assinatura do respons√°vel pelo estabelecimento na hora da notifica√ß√£o/auto.

Por que: Confere "ci√™ncia" imediata ao ato administrativo. Essencial para evitar recursos jur√≠dicos depois alegando que "n√£o sabia".

ImageAnnotator (Desenho sobre Foto):

O que √©: O fiscal tira foto da "cozinha suja", e o componente permite desenhar c√≠rculos vermelhos ou setas nas irregularidades antes de subir pro servidor.

Por que: Uma foto anotada vale por mil palavras num relat√≥rio t√©cnico.

ScannerView (Leitor de QR/Barcode):

O que √©: Interface de c√¢mera com overlay de mira.

Por que: Ler o QR Code do Alvar√° anterior, ler c√≥digo de barras de produtos vencidos/apreendidos. Integrar isso no UI Kit (ao inv√©s de chamar API nativa crua) mant√©m a identidade visual.

2. Legal & Documental (Burocracia Eficiente)
O produto final da IVISA geralmente √© um documento (Laudo, Auto, Licen√ßa).

PDFPreview (Com Zoom e Pan):

O que √©: Visualizador de PDF nativo/web responsivo dentro de um Modal ou Drawer.

Por que: O fiscal precisa mostrar o Auto de Infra√ß√£o gerado para o cidad√£o ler antes de assinar.

DiffViewer (Comparador de Vers√µes):

O que √©: Mostra texto antigo vs. texto novo (estilo Git diff, mas amig√°vel para humanos, com verde/vermelho).

Por que: Comparar a legisla√ß√£o do ano passado com a atual, ou comparar o relat√≥rio da visita anterior com a visita atual para ver se as exig√™ncias foram cumpridas.

TimelineAudit (Rastro de Auditoria):

O que √©: Uma varia√ß√£o da Timeline, mas focada em logs imut√°veis (Quem, Quando, Onde, O Que).

Por que: Transpar√™ncia. "O usu√°rio X alterou o status de 'Pendente' para 'Aprovado' √†s 14:30".

3. Geo-Intelig√™ncia (O "Rio Factor")
Voc√™ j√° tem "Maps" na lista, mas vale detalhar sub-componentes de mapa espec√≠ficos para gest√£o urbana:

GeoFenceSelector (Seletor de Pol√≠gono):

O que √©: Ferramenta para desenhar uma √°rea no mapa.

Por que: Definir √°reas de atua√ß√£o de uma equipe de fiscaliza√ß√£o ou isolar uma √°rea de surto epid√™mico.

LocationAccuracyBadge:

O que √©: Um indicador visual (verde/amarelo/vermelho) da precis√£o do GPS.

Por que: Fundamental para provar que o fiscal realmente esteve no local da inspe√ß√£o (Georreferenciamento do ato administrativo).

4. Acessibilidade & Cidadania
A11yToolbar (Barra de Acessibilidade Gov):

O que √©: Aquele menu flutuante cl√°ssico: "Aumentar Fonte", "Alto Contraste", "VLibras".

Por que: √â exig√™ncia legal para portais governamentais (e-MAG - Modelo de Acessibilidade em Governo Eletr√¥nico). Ter isso como componente nativo do Design System economiza dor de cabe√ßa em auditorias do MP.

Onde encaixar na sua Tasklist?
Eu criaria uma "Wave 4: Field & Legal Tools" na se√ß√£o de Intelligent Organisms ou Phase 5a:

Markdown
- [ ] **Field Operations (Wave 4)**
  - [ ] Implement `SignaturePad` (Canvas based)
  - [ ] Implement `ImageAnnotator` (Draw on Image)
  - [ ] Implement `ScannerView` (QR/Barcode Overlay)
  - [ ] Implement `LocationStatus` (GPS Accuracy & Timestamp)

- [ ] **Legal & Compliance (Wave 5)**
  - [ ] Implement `DiffViewer` (Text comparison)
  - [ ] Implement `PDFViewer` (Responsive rendering)
  - [ ] Implement `A11yToolbar` (Gov standard compliance)
Cara, parab√©ns de novo. O uso de Victory para os gr√°ficos √© a melhor escolha poss√≠vel (leve e customiz√°vel). Se precisar de ajuda para definir a arquitetura desse SignaturePad (que costuma ser chatinho de fazer funcionar bem no touch e no mouse ao mesmo tempo), d√° um toque!

ent√£o, o pr√≥ximo pulo do gato, depois disso ficar pronto, √© criar um sisteminha de backend (nao devo integrar isso agora, ainda estou estudando o melhor meio de fazer isso) pra acelerar e facilitar o uso desses building blocks com AI Agents. A ideia √© criar sei l√°, servidor MCP (model context protocol, que expoe um toolset pro agente), da√≠ ele tem uma tabela em json com todos os componentes, o agente escolhe, o servidor cospe o codigo pronto, o agente s√≥ cola ele e substitui os placeholders / mocks. construir programas a partir da√≠ vai ficar bem mais r√°pido, preciso, e espero eu, cross platform por padr√£o. como vc acha que seria a melhor maneira de fazer isso? d√° uma olhada nos links abaixo







---

O que √© MCP?

MCP (Model Context Protocol) √© um protocolo aberto projetado para padronizar e estruturar a comunica√ß√£o entre modelos de linguagem (LLMs), agentes de IA, ferramentas externas e usu√°rios humanos, de modo flex√≠vel, modular e interoper√°vel. Ele define uma linguagem comum e uma arquitetura para permitir que diferentes componentes de sistemas inteligentes (como LLMs, APIs, ferramentas, agentes aut√¥nomos e interfaces de usu√°rio) se comuniquem, compartilhem contexto e cooperem de forma coordenada.

1. Orquestra√ß√£o e Integra√ß√£o

Permite que agentes de IA usem recursos externos, como ferramentas, bancos de dados, APIs ou outros modelos.

Gerencia o fluxo de contexto entre m√∫ltiplos componentes (ex: entre o usu√°rio, ferramentas e modelos).

Facilita a constru√ß√£o de sistemas multiagentes e pipelines de infer√™ncia.



2. Persist√™ncia e Compartilhamento de Contexto

Permite que o ‚Äúestado mental‚Äù ou contexto de um modelo ou agente seja persistido e reutilizado entre intera√ß√µes.

Isso inclui hist√≥rico de conversas, decis√µes anteriores, ferramentas usadas etc.



3. Interoperabilidade

Um agente que segue o MCP pode ser trocado ou combinado com outros facilmente, independentemente da linguagem de programa√ß√£o ou do provedor do modelo.

Integra modelos de diferentes fornecedores ou at√© mesmo locais, como LLMs rodando em servidores pr√≥prios.



4. Modularidade

Cada parte do sistema (modelo, ferramenta, servidor, UI) pode ser desenvolvida e atualizada separadamente, desde que siga o protocolo.



Conceitos chave:

Roots

Elementos principais de uma intera√ß√£o (ex: entrada do usu√°rio, ferramentas dispon√≠veis, contexto).

Prompts

Blocos estruturados de comunica√ß√£o (ex: instru√ß√µes, perguntas, a√ß√µes).

Resources

Entidades acessadas ou manipuladas (ex: arquivos, bancos de dados, fun√ß√µes externas).

Tools

Ferramentas externas que um agente pode invocar (ex: calculadora, buscador, API externa).

Transports

Mecanismos de comunica√ß√£o (HTTP, WebSocket, etc).

Sampling

Como s√£o escolhidas respostas (explora√ß√£o, temperatura, etc).

Inspector

Ferramenta de depura√ß√£o visual do MCP.

Debugging Tools

Utilit√°rios para testar e inspecionar a execu√ß√£o de agentes e prompts.



Componentes

MCP Client

Interface usada para interagir com um servidor MCP (ex: enviar prompts, receber respostas).

Pode ser usado por um front-end, CLI, ou outro agente.



MCP Server

Respons√°vel por processar prompts, executar ferramentas, manter contexto, orquestrar m√∫ltiplos modelos/agentes.

Pode executar localmente ou em nuvem.

SDKs (Python, Java, etc)

Kits de desenvolvimento para implementar clientes, servidores, ferramentas e agentes customizados que seguem o protocolo.



MCP DOCUMENTATION LINKS

https://modelcontextprotocol.io/introduction

https://github.com/modelcontextprotocol/python-sdk

https://modelcontextprotocol.io/sdk/java/mcp-overview

https://modelcontextprotocol.io/sdk/java/mcp-client

https://modelcontextprotocol.io/sdk/java/mcp-server

https://modelcontextprotocol.io/quickstart/server

https://modelcontextprotocol.io/quickstart/client

https://modelcontextprotocol.io/quickstart/user

https://modelcontextprotocol.io/examples

https://modelcontextprotocol.io/clients

https://modelcontextprotocol.io/tutorials/building-mcp-with-llms

https://modelcontextprotocol.io/docs/tools/debugging

https://modelcontextprotocol.io/docs/tools/inspector

https://modelcontextprotocol.io/docs/concepts/architecture

https://modelcontextprotocol.io/docs/concepts/resources

https://modelcontextprotocol.io/docs/concepts/prompts

https://modelcontextprotocol.io/docs/concepts/tools

https://modelcontextprotocol.io/docs/concepts/sampling

https://modelcontextprotocol.io/docs/concepts/roots

https://modelcontextprotocol.io/docs/concepts/transports

https://modelcontextprotocol.io/development/updates

https://modelcontextprotocol.io/development/roadmap

https://modelcontextprotocol.io/development/contributing

https://spec.modelcontextprotocol.io/specification/2024-11-05/

https://spec.modelcontextprotocol.io/specification/2024-11-05/architecture/

https://spec.modelcontextprotocol.io/specification/2024-11-05/basic/

https://spec.modelcontextprotocol.io/specification/2024-11-05/server/

https://spec.modelcontextprotocol.io/specification/2024-11-05/client/

https://spec.modelcontextprotocol.io/specification/2024-11-05/contributing/

https://spec.modelcontextprotocol.io/specification/2024-11-05/revisions/



FastAPI-MCP

https://github.com/tadata-org/fastapi_mcp 

O FastAPI‚ÄëMCP √© uma solu√ß√£o √°gil e eficiente para transformar APIs FastAPI em MCP, com suporte a autentica√ß√£o, filtros de rota, comunica√ß√£o via ASGI/HTTP e integra√ß√£o com diversos clientes MCP. 

Documenta√ß√£o:

https://fastapi-mcp.tadata.com/getting-started/welcome

https://fastapi-mcp.tadata.com/getting-started/installation

https://fastapi-mcp.tadata.com/getting-started/quickstart

https://fastapi-mcp.tadata.com/getting-started/FAQ

https://fastapi-mcp.tadata.com/getting-started/best-practices

https://fastapi-mcp.tadata.com/configurations/tool-naming

https://fastapi-mcp.tadata.com/configurations/customization

https://fastapi-mcp.tadata.com/advanced/auth

https://fastapi-mcp.tadata.com/advanced/deploy

https://fastapi-mcp.tadata.com/advanced/refresh

https://fastapi-mcp.tadata.com/advanced/transport

https://medium.com/@miki_45906/how-to-build-mcp-server-with-authentication-in-python-using-fastapi-8777f1556f75

https://medium.com/@miki_45906/advanced-mcps-in-python-how-transitioning-from-fastmcp-wrappers-improved-our-fastapi-mcp-tool-6f6476a39dbc

https://medium.com/@miki_45906/mcp-compatible-clients-the-complete-updated-list-a82477946ef2

https://medium.com/@miki_45906/converting-an-mcp-server-from-sse-to-stdio-a-simple-solution-dec9bb8fef8e

https://medium.com/@miki_45906/how-to-build-mcp-server-in-python-using-fastapi-d3efbcb3da3a

https://github.com/tadata-org/fastapi_mcp/blob/main/examples/01_basic_usage_example.py

https://github.com/tadata-org/fastapi_mcp/blob/main/examples/02_full_schema_description_example.py

https://github.com/tadata-org/fastapi_mcp/blob/main/examples/03_custom_exposed_endpoints_example.py

https://github.com/tadata-org/fastapi_mcp/blob/main/examples/04_separate_server_example.py

https://github.com/tadata-org/fastapi_mcp/blob/main/examples/05_reregister_tools_example.py

https://github.com/tadata-org/fastapi_mcp/blob/main/examples/06_custom_mcp_router_example.py

https://github.com/tadata-org/fastapi_mcp/blob/main/examples/07_configure_http_timeout_example.py



MCP Proxy

https://github.com/sparfenyuk/mcp-proxy

O mcp-proxy √© uma ferramenta em Python que atua como ponte entre diferentes modos de transporte do protocolo MCP (Model Context Protocol), permitindo que clientes baseados em stdio (como o Claude Desktop) se conectem a servidores MCP que usam SSE ou Streamable HTTP, e vice-versa, garantindo compatibilidade entre ferramentas que n√£o suportam os mesmos tipos de comunica√ß√£o.

Essa √© exatamente a fronteira da engenharia de software assistida por IA agora. Voc√™ est√° falando de passar de Code Generation (o modelo "alucina" c√≥digo baseado no treino dele) para Component Retrieval & Assembly (o modelo usa pe√ßas de Lego reais e validadas).

Para a Prefeitura, isso garante padroniza√ß√£o visual, acessibilidade e seguran√ßa, pois o agente n√£o vai inventar um Button novo, ele vai usar o Button auditado do seu Design System.

Baseado nos links que voc√™ mandou (especialmente o FastAPI-MCP), aqui est√° a arquitetura "Matadora" para esse Backend de Componentes.

Arquitetura Proposta: "The Component Foundry"
A ideia √© criar um MCP Server que atua como um bibliotec√°rio ativo do seu Design System.

1. A Estrutura de Dados (O "Cat√°logo")
Antes do c√≥digo, precisamos organizar como o MCP vai ler seus componentes. N√£o basta ter o arquivo .tsx. O agente precisa de metadados.

Sugiro criar um arquivo mestre registry.json (ou um banco SQLite leve) que √© gerado automaticamente no build do seu Design System. Ele deve conter:

JSON
{
  "name": "Card",
  "type": "organism",
  "description": "Container principal para agrupamento de informa√ß√µes com header e footer opcionais.",
  "props_schema": { ... }, // Schema JSON das props
  "dependencies": ["@tamagui/core", "lucide-react-native"],
  "code_snippet": "export const Card = ...", // O c√≥digo fonte real ou o caminho para importa√ß√£o
  "usage_example": "<Card><CardHeader>T√≠tulo</CardHeader>...</Card>"
}
2. O Servidor MCP (FastAPI-MCP)
Usando o fastapi-mcp que voc√™ linkou, a implementa√ß√£o fica muito limpa. O servidor n√£o serve HTML, ele serve Tools e Resources para a IA.

Por que FastAPI-MCP?

SSE (Server-Sent Events): Permite que m√∫ltiplos agentes (Cursor, Claude Desktop, Trae) se conectem ao mesmo tempo.

Auth: Voc√™ pode proteger esse cat√°logo para uso interno da equipe da IVISA.

Implementa√ß√£o Pr√°tica (O "Como Fazer")
Aqui est√° um esbo√ßo de como seria esse servidor em Python:

Python
from fastapi import FastAPI
from mcp_server_fastapi import MCPServer
from pydantic import BaseModel, Field
import json

# 1. Carrega seu registro de componentes (pode vir de um DB ou JSON)
# Na pr√°tica, voc√™ leria isso do seu monorepo
COMPONENT_REGISTRY = json.load(open("./ivisa-ui-registry.json"))

app = FastAPI()
mcp = MCPServer("IvisaComponentServer")

# --- TOOLS (O que o Agente pode fazer) ---

class SearchComponentParams(BaseModel):
    query: str = Field(..., description="O que voc√™ quer construir? ex: 'tabela de dados' ou 'bot√£o de login'")

@mcp.tool(name="search_components", description="Busca componentes dispon√≠veis no Design System da IVISA")
async def search_components(params: SearchComponentParams):
    # L√≥gica simples de busca textual
    results = [
        {"name": c["name"], "desc": c["description"]} 
        for c in COMPONENT_REGISTRY 
        if params.query.lower() in c["description"].lower() or params.query.lower() in c["name"].lower()
    ]
    return results

class GetComponentParams(BaseModel):
    component_name: str = Field(..., description="Nome exato do componente, ex: 'DataTable'")

@mcp.tool(name="get_component_code", description="Retorna o c√≥digo fonte, imports necess√°rios e exemplo de uso de um componente")
async def get_component_code(params: GetComponentParams):
    component = next((c for c in COMPONENT_REGISTRY if c["name"] == params.component_name), None)
    if not component:
        return "Component not found"
    
    # O pulo do gato: Entregar o contexto completo para o agente n√£o alucinar imports
    return {
        "code": component["code_snippet"],
        "imports": component["dependencies"],
        "usage": component["usage_example"],
        "best_practices": component.get("notes", "Use dentro de um ThemeProvider")
    }

# --- RESOURCES (Contexto passivo) ---
# O agente pode ler a documenta√ß√£o de design tokens como um recurso est√°tico

@mcp.resource("ivisa://tokens/colors")
async def get_design_tokens():
    return {
        "primary": "#004D8C", # Azul Prefeitura
        "secondary": "#F2F2F2",
        "glassmorphism": "blur(10px) rgba(255,255,255,0.8)"
    }

# Conecta o MCP ao FastAPI
mcp.mount(app, "/mcp")
3. O Fluxo de Trabalho do Agente
Quando voc√™ estiver no Cursor ou Windsurf e digitar: "Crie uma tela de login com o padr√£o da prefeitura", o fluxo via MCP acontece assim:

Thinking: O agente percebe que precisa de componentes de UI.

Tool Call (search_components): Ele busca "login", "input", "button".

Tool Call (get_component_code): Ele baixa o c√≥digo exato do InputGroup, Button e Card que voc√™ criou.

Assembly: Ele l√™ o recurso ivisa://tokens/colors para saber o hex code exato do azul e monta a tela usando seus componentes, sem inventar CSS novo.

Por que isso √© revolucion√°rio para a Prefeitura?
Cross-Platform Real: Se voc√™ pedir "Gere a vers√£o React Native", o MCP pode ter uma flag no registro para entregar a vers√£o compat√≠vel com Expo do Tamagui.

Manuten√ß√£o: Se o design do Button mudar na semana que vem, voc√™ atualiza o registro. O agente passar√° a fornecer o bot√£o novo imediatamente, sem precisar ser "retreinado".

Onboarding: Um dev novo entra na equipe. Ele n√£o precisa decorar os 100 componentes. Ele pede pro agente: "Me d√° um form padr√£o", e o agente traz o componente da casa, 100% compliant.

Pr√≥ximos Passos Sugeridos
Gerador de Registry: Crie um script (Node.js) que varre sua pasta packages/ui, l√™ os arquivos TSX e gera esse registry.json. Existem ferramentas como react-docgen que extraem props e descri√ß√µes automaticamente.

Deploy do Server: Use o mcp-proxy (link que voc√™ mandou) se quiser rodar o servidor em um container Docker na nuvem da prefeitura e conectar seu PC local via SSE.

Scaffolding Tool: Crie uma ferramenta avan√ßada no MCP chamada scaffold_page.

Input: "Fiscaliza√ß√£o Sanit√°ria"

A√ß√£o: O servidor MCP devolve n√£o s√≥ componentes, mas uma estrutura de pastas inteira (/screens/Fiscalizacao.tsx, /components/FiscalizacaoForm.tsx) baseada em templates pr√©-definidos.

Esse setup coloca a IVISA anos-luz √† frente em termos de Developer Experience. Quer que eu rascunhe o script para gerar o registry.json a partir dos componentes Tamagui?

po, perfeito! pode me dar uma lista completa, detalhada e granular de tarefas em ingles q eu possa integrar ao tasklist atual la pro final?

Essa √© a jogada de mestre. Transformar o seu Design System em um API-first Asset para agentes de IA √© o que vai diferenciar um sistema "legado" de um sistema preparado para 2026.

Aqui est√° a expans√£o da sua Tasklist, mantendo o mesmo padr√£o de formata√ß√£o, focada na cria√ß√£o desse "Ivisa Component Foundry" (o Backend MCP).

Pode copiar e colar l√° no final do seu documento:

üöÄ Phase 6: AI Backend & MCP Integration (The Component Foundry)
Goal: Create a robust Model Context Protocol (MCP) server that acts as an intelligent librarian for the Design System, allowing AI agents to query, retrieve, and assemble UI components with strict adherence to the system's rules.

üõ†Ô∏è 6a ‚Äì Component Registry Extraction (The Harvester)
Context: Before serving components, we need to extract metadata (props, types, examples) from the codebase into a machine-readable format.

[ ] Design Schema Definition [Backend]

Define the JSON Schema for registry.json (id, name, type, props, dependencies, code_snippet, usage_example).

[ ] AST Extraction Script [Node/TS]

Implement a Node.js script using ts-morph or react-docgen to parse packages/ui source files.

Automate extraction of Component descriptions (JSDoc) and Prop Types.

[ ] Storybook Scraper [Node]

Implement logic to read .stories.tsx files to extract "Gold Standard" usage examples for each component.

Rationale: Agents perform better with few-shot examples; Storybook is the perfect source for this.

[ ] Registry Build Pipeline [CI/CD]

Create a npm run build:registry script that generates the registry.json file.

Integrate this into the CI pipeline to ensure the AI registry is always in sync with the latest UI package version.

üß† 6b ‚Äì MCP Server Implementation (The Brain)
Context: Building the server using fastapi-mcp to serve the registry to AI clients (Cursor, Windsurf, Claude).

[ ] Server Initialization [Python/FastAPI]

Initialize the ivisa-mcp-server repository using fastapi-mcp.

Configure basic logging and health checks (/health).

[ ] Resource: Design Tokens [MCP]

Implement @mcp.resource("ivisa://tokens/all"): Return JSON with all colors, spacing, radius, and typography tokens.

Goal: Allow agents to reference correct hex codes and spacing units without hallucinating magic numbers.

[ ] Tool: Component Search [MCP]

Implement @mcp.tool("search_components"): Fuzzy search logic to find components by name or description (e.g., query "user card" returns Card and Avatar).

[ ] Tool: Component Retrieval [MCP]

Implement @mcp.tool("get_component_source"): Return the full code, required imports, and a usage example for a specific component ID.

Critical: Ensure the output format is copy-paste ready for the agent.

[ ] Tool: Icon Retrieval [MCP]

Implement @mcp.tool("search_icons"): Integration with Lucide/Phosphor (whatever you use) to help agents find the correct icon name.

‚ö° 6c ‚Äì Advanced Agent Capabilities (The Logic)
Context: Going beyond simple retrieval to intelligent scaffolding.

[ ] Template Scaffolding [MCP]

Create a templates/ directory in the backend with standard layouts (e.g., DashboardLayout, FormLayout, DataGridPage).

Implement @mcp.tool("scaffold_page"): Returns a full page structure based on a selected template.

[ ] Validation Logic [MCP]

Implement @mcp.tool("validate_usage"): Accepting a code snippet and checking if it violates basic Design System rules (e.g., using inline styles instead of Tamagui props).

[ ] Context Awareness (Rio Specifics) [MCP]

Implement a resource ivisa://context/rules: Return a summary of "Frontend Guidelines for Rio City Hall" (Accessibility requirements, Color contrast rules).

üö¢ 6d ‚Äì Infrastructure & Connectivity
Context: Making the server accessible to local IDEs and potentially remote agents.

[ ] Dockerization [DevOps]

Create a Dockerfile for the FastAPI server (optimized for Python 3.11+).

Ensure registry.json is mounted or copied correctly into the container.

[ ] MCP Proxy Setup [DevOps]

Implement mcp-proxy configuration to bridge SSE (Server-Sent Events) to Stdio.

Goal: Allow local IDEs (like Cursor) to connect to the Dockerized server easily.

[ ] Authentication Layer [Security]

Implement basic API Key authentication in fastapi-mcp to prevent unauthorized access if deployed publicly.

[ ] IDE Configuration Guide [DOC]

Write a docs/AI_AGENT_SETUP.md explaining how developers can add the MCP server to their Cursor/Windsurf settings.json.

Pr√≥ximo Passo
Gostaria que eu j√° criasse o rascunho do arquivo schema.ts (para a tarefa Design Schema Definition)? Assim voc√™ j√° define exatamente quais dados seus rob√¥s v√£o precisar extrair dos componentes React.