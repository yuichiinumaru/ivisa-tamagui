import { render, screen } from '../../../vitest.setup'
import { DropdownMenu, DropdownMenuTrigger, DropdownMenuContent, DropdownMenuItem } from './DropdownMenu'
import { vi } from 'vitest'
import React from 'react'

vi.mock('tamagui', async () => {
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  const tamagui = await vi.importActual('tamagui');
  return {
    ...tamagui,
    /* eslint-disable @typescript-eslint/no-explicit-any */
    Text: (props: any) => <span {...props} />,
    YStack: (props: any) => <div {...props} />,
    XStack: (props: any) => <div {...props} />,
    ScrollView: (props: any) => <div {...props} />,
    ListItem: (props: any) => <div {...props} />,
    YGroup: (props: any) => <div {...props} />,
    YGroupItem: (props: any) => <div {...props} />,
    /* eslint-enable @typescript-eslint/no-explicit-any */
  };
});

vi.mock('@radix-ui/react-dropdown-menu', () => ({
    Root: ({ children }: any) => <div>{children}</div>,
    Trigger: ({ children }: any) => <button>{children}</button>,
    Portal: ({ children }: any) => <div>{children}</div>,
    Content: ({ children }: any) => <div>{children}</div>,
    Item: ({ children }: any) => <div>{children}</div>,
    Group: ({ children }: any) => <div>{children}</div>,
    CheckboxItem: ({ children }: any) => <div>{children}</div>,
    ItemIndicator: ({ children }: any) => <div>{children}</div>,
    RadioItem: ({ children }: any) => <div>{children}</div>,
    Label: ({ children }: any) => <div>{children}</div>,
    Separator: ({ children }: any) => <div>{children}</div>,
    SubTrigger: ({ children }: any) => <div>{children}</div>,
    SubContent: ({ children }: any) => <div>{children}</div>,
    Sub: ({ children }: any) => <div>{children}</div>,
    RadioGroup: ({ children }: any) => <div>{children}</div>,
}))

describe('DropdownMenu', () => {
  it('renders trigger', () => {
    render(
      <DropdownMenu>
        <DropdownMenuTrigger>Open</DropdownMenuTrigger>
        <DropdownMenuContent>
            <DropdownMenuItem>Item</DropdownMenuItem>
        </DropdownMenuContent>
      </DropdownMenu>
    )
    expect(screen.getByText('Open')).toBeInTheDocument()
  })
})
